#! /bin/sh
# (c) Copyright 2019-2022, James Stevens ... see LICENSE for details
# Alternative license arrangements possible, contact me for more information

forks="1"
facility="local0"
epp_dir="/epp"


{
echo "
worker_processes  3;
pid /run/nginx.pid;

events { worker_connections  1024; }

user nginx;
error_log syslog:server=unix:/dev/log,facility=${facility},tag=nginx error;

http {
	access_log syslog:server=unix:/dev/log,facility=${facility},tag=nginx,severity=info;

	include         mime.types;
	default_type    application/octet-stream;
	sendfile        on;
	keepalive_timeout  65;

	upstream epp_servers {
		server unix:/run/wsgi_epprest_nol_1.sock;
		}

	server {
		listen 10000;
		location / {
			proxy_pass http://epp_servers;
			}
		}
	}"
} > /run/nginx.conf
